{"version":3,"sources":["../../lib/api/control.js"],"names":["router","Router","isLogEnabled","controlApi","sourcesParser","post","req","res","console","log","green","body","forEach","record","switchRecord","status","end","resetMap"],"mappings":";;;;;;;AAAA;;;;AACA;;AACA;;;;;;AAEA,MAAMA,SAAS,kBAAQC,MAAR,CAAe,EAAf,CAAf;AACA,MAAM,EAAEC,YAAF,qBAAN;;AAEO,MAAMC,kCAAaC,iBAAiB;AACzCJ,SAAOK,IAAP,CAAY,MAAZ,EAAoB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChC,QAAIL,YAAJ,EAAkB;AAChBM,cAAQC,GAAR,CAAY,qBAAqBC,KAAjC;AACD;;AAEDJ,QAAIK,IAAJ,CAASC,OAAT,CAAiBC,UAAU;AACzB;AACA;AACA;AACAT,oBAAcU,YAAd,CAA2BD,MAA3B;AACD,KALD;;AAOAN,QAAIQ,MAAJ,4BAAqBC,GAArB;AACD,GAbD;;AAeAhB,SAAOK,IAAP,CAAY,QAAZ,EAAsB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClC,QAAIL,YAAJ,EAAkB;AAChBM,cAAQC,GAAR,CAAY,YAAYC,KAAxB;AACD;;AAEDN,kBAAca,QAAd;;AAEAV,QAAIQ,MAAJ,4BAAqBC,GAArB;AACD,GARD;;AAUA,SAAOhB,MAAP;AACD,CA3BM","file":"control.js","sourcesContent":["import express from 'express';\nimport { ACCEPTED } from 'http-status-codes';\nimport config from '../config';\n\nconst router = express.Router({});\nconst { isLogEnabled } = config;\n\nexport const controlApi = sourcesParser => {\n  router.post('/set', (req, res) => {\n    if (isLogEnabled) {\n      console.log('API set new values'.green);\n    }\n\n    req.body.forEach(record => {\n      // console.log('new record is >');\n      // console.log(JSON.stringify(record, null, \"  \"));\n      // console.log('< new record is');\n      sourcesParser.switchRecord(record);\n    });\n\n    res.status(ACCEPTED).end();\n  });\n\n  router.post('/reset', (req, res) => {\n    if (isLogEnabled) {\n      console.log('API Reset'.green);\n    }\n\n    sourcesParser.resetMap();\n\n    res.status(ACCEPTED).end();\n  });\n\n  return router;\n};\n"]}